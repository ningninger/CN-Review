# 链路层服务

**节点：**将运行链路层协议的任何设备均成为节点，包括主机、路由器、交换机、wifi接入点

**链路：**沿着通信路径连接相邻节点的通信信道成为链路

**链路层帧：**将数据包分装为帧

## 成帧

一个帧由数据字段和若干首部字段组成



## 媒介访问控制

媒体访问控制(**MAC**)协议规定了帧在链路上的传输规则



## 可靠交付

当链路层协议提供可靠交付服务时，它保证无差错地经链路层移动每个网络层数据报

链路层的可靠交付通常是通过确认和重传取得的。

链路层的可靠交付通常是用于易产生高差错率的链路，例如无线链路，其目的是纠错



## 差错检验和纠正

链路层的差错检验是用硬件来实现的，并且较为复杂。



## 链路层在何处实现

链路层的主体部分是在网络适配器(网络接口卡)中实现的，一个芯片





## 链路层的差错检验和纠错技术

### 一维奇偶校验

事先通信双方约定采用奇校验还是偶校验，若采用偶校验，则发送方在信息后面附加一位校验位，保证所有位中存在偶数个1

缺点：只能检错，不能纠错，当发生偶数个错误的时候，不能检测出



### 二维奇偶校验

采用矩阵检验，使用i+j+1的校验位编码

对于单个比特二维奇偶校验不仅能够检验出而且能够纠正，对于校验码本身的错误也能纠正，对于分组中的两个比特错误的任何组合都能够检验但不能纠正



### 校验和

检验和是将分组中所有位每16位为1组，求和，将求和的结果取反码即得到校验码

在求和过程中，对于溢出的情况，我们要将溢出的那一位和最后一位相加

当接受方收到信息后将所有数据16位为一组相加(包括校验位)如果最终结果不是全1，则判断出错了

校验和相对开销较循环冗余编码的开销CRC小，只需要16位。



### 循环冗余编码CRC

通信双方约定一个`r+1`比特的生成多项式G，发送方在d比特数据后附加r比特CRC码，这是这d+r多项式可以整除G。接收方用G去除接收到的d+r如果余数不为0，则判断出错
$$
r比特R = \frac{D*2^r}{G}
$$
检验和通常在运输层中应用，而CRC通常用在链路层，主要因为运输层通常在用户主机中作为操作系统的一部分实验，所以使用相对简单和快速的校验和，而链路层差错检测在适配器中用专业硬件实现，能够快速处理复杂多CRC操作



















