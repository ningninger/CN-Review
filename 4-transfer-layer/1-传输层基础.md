# 传输层基础

+ 传输层存在目的是促进不同主机上运行的应用程序进程之间的通信
+ 多路复用，分解复用：虽然IP数据包是寻址给主机的，但是端到端的通信发生在这些主机内的特定应用程序之间。因此，需要一种机制来确定那些数据包应该被发送到哪个应用程序
+ IP层提供的是一种尽力而为的服务模型，这意味着数据包可能会出现各种问题，没有任何保证或指导来确定发送多少流量以及何时发送流量
+ 传输层通过为应用层提供可靠和高效的数据传输服务来解决这些挑战
  + 错误检测和纠正机制
  + 控制应用程序之间的数据流



## 多路复用和多路分解

+ 多路复用：将来自不同应用程序的数据块从源主机收集和组合，并交付给网络层的过程。
  + 它允许多个应用程序共享同一个网络连接
+ 多路分解：从多路复用的数据流中将正确的数据传输给相应的套接字的过程。
  + 多路分解用过程依赖标识信息来确定哪个数据块属于哪个应用程序，并将其正确地传递给相应的套接字



工作原理：

+ 主机接收到一个IP数据包，其中包含源IP地址和目标IP地址
+ 主机从数据报中提取出传输层段
+ 传输层段包括端口号和目标端口号
+ 主机使用目标IP地址和目标端口号来确定应将该段传递到哪个套接字
+ 主机查找映射表，该表将端口号与套接字关联起来，以找到匹配的套接字
+ 一旦确定了套接字，传输层段将被传递到相应的套接字，应用程序进程可以访问接收到的数据







## 传输层角色

+ 进行进程间的沟通
  + 多路复用和多路分解
  + 使用端口来实现
+ 提供应用层的共同端到端服务
  + 可靠的、按顺序的数据传输
  + 适度的数据传输速率
+ TCP和UDP是最精简传输协议
  + UDP是一种精简的传输协议，只提供多路复用和多路分解
  + TCP提供一个可靠的、面向连接的通信服务，提供拥塞控制



## 应用程序和套接字

+ 套接字是应用程序进程与操作系统（传输层）进行网络消息交换的软件抽象
+ 两种重要的套接字：
  + UDP套接字
  + TCP套接字



## 端口

端口是16位数字，用于区分应用程序

数据包的传输头部中携带源端口号和目的端口号

+ 端口号类别
  + 知名端口号
  + 临时端口号



## 解决方法的成分

+ 校验和（用于检测位错误）
+ 定时器（用于检测包的丢失）
+ 确认消息和否认确认消息
+ 序列号（用于处理重复的数据包）





## 设计一个可靠的传输协议

### 停等协议

+ 可靠的传输协议，但效率非常低下



### 流水线协议

+  允许发送方发送多个尚未收到确认的数据包来提高效率



活动窗口中窗口大小变得过大

+ 增加的拥塞，可能会同时发送更多的数据包
+ 缓冲区溢出
+ 增加的重传
+ 资源利用



## GBN和选择性重传

+ GBN
  + 当错误率是低的，但是浪费带宽
+ 选择性重传
  + 当错误率是高的，但是太复杂了

































































































































